module.exports = {

  FUSES: {
    "SC serverlokaal": {
      "sensorId": ["0c5870ce-0e8d-44ca-801c-10a00ff65ba9"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Voeding vaatwas": {
      "sensorId": ["3b927c9c-7186-4556-98fc-af66fd765689"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Voeding ventilatie": {
      "sensorId": ["421a7cf1-11a9-43f3-84ea-b188433e852c"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Licht & SC WC & stookplaats": {
      "sensorId": ["9b16c7a8-b38a-4b07-b114-aefee392f8eb"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Voeding boiler": {
      "sensorId": ["8eb29d17-7b00-4f72-b279-7d4b2bb65973"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Voedingen Velux achter bureau 2, uitbereiding alarm": {
      "sensorId": ["77d38094-c1e0-4122-98dc-1b8cd8fc1eb8"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Licht bureau 1, inkomzone, traphal, vergaderlokaal 2": {
      "sensorId": ["1b4c1086-9d2e-4e9e-8235-3747bfc1200b"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Licht directielokaal, vergaderlokaal 1, terras, bureau 2": {
      "sensorId": ["f812c815-10b2-4e64-be7d-09d6bcea0ff3"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "SC & licht keuken": {
      "sensorId": ["9764a3ad-2ee1-4382-bb0e-db64daa9a1b2"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Vloerdoos vergaderlokaal 1": {
      "sensorId": ["ae1a9bd4-f16d-4934-a67c-ec9ad4d3bd3e"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Vloerdoos bureau 1": {
      "sensorId": ["6c4da608-8e49-4917-90db-ff92a889b364", "44494f41-f865-4cad-9032-e968148b5865", "f390d66f-4901-4dce-bf24-51d862f0feea"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Vloerdoos bureau 2": {
      "sensorId": ["80b0f3d9-8dac-4253-93cf-a06e4f75b5b7", "8a472d54-865c-4dcd-8e96-7170ebb86d41", "07a6cd16-a225-49b1-b064-b340930c9ea4", "16075fc4-ff32-4075-999b-2bb39dd0da71"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "SC inkomzone, vergaderlokaal 1 & 2, directielokaal, velux achter": {
      "sensorId": ["4cd4ac9e-06d9-4c9c-9e6d-fb7e7b958b7d"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "SC bureau 1, licht serverlokaal, licht & SC berging & bureau's boven": {
      "sensorId": ["758b6544-5cd6-4dda-97f3-a8aaadbb770a"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    },
    "Licht centraal LED-strip": {
      "sensorId": ["b6500101-ef5b-42f0-a332-2a61d25231cb"],
      "concentratorId": ["23915b22-462c-401b-8d66-800d7ebcc667"],
      "gatewayId": ["b1ef86b6-099d-4a18-88bf-ccb60f88f25a"]
    }
  },

  SENSOR_IDS: {
    "0c5870ce-0e8d-44ca-801c-10a00ff65ba9": {
      fuse: "SC serverlokaal",
      usageCategories: ["Computer servers", "Other sockets"]
    },
    "3b927c9c-7186-4556-98fc-af66fd765689": {
      fuse: "Voeding vaatwas",
      usageCategories: ["Cooking"]
    },
    "421a7cf1-11a9-43f3-84ea-b188433e852c": {
      fuse: "Voeding ventilatie",
      usageCategories: ["Ventilation"]
    },
    "9b16c7a8-b38a-4b07-b114-aefee392f8eb": {
      fuse: "Licht & SC WC & stookplaats",
      usageCategories: ["Lighting", "Other sockets"]
    },
    "8eb29d17-7b00-4f72-b279-7d4b2bb65973": {
      fuse: "Voeding boiler",
      usageCategories: ["Water"]
    },
    "77d38094-c1e0-4122-98dc-1b8cd8fc1eb8": {
      fuse: "Voedingen Velux achter bureau 2, uitbereiding alarm",
      usageCategories: ["Alarm", "Other", "Sun blinds"]
    },
    "1b4c1086-9d2e-4e9e-8235-3747bfc1200b": {
      fuse: "Licht bureau 1, inkomzone, traphal, vergaderlokaal 2",
      usageCategories: ["Lighting"]
    },
    "f812c815-10b2-4e64-be7d-09d6bcea0ff3": {
      fuse: "Licht directielokaal, vergaderlokaal 1, terras, bureau 2",
      usageCategories: ["Lighting"]
    },
    "9764a3ad-2ee1-4382-bb0e-db64daa9a1b2": {
      fuse: "SC & licht keuken",
      usageCategories: ["Lighting", "Other sockets"]
    },
    "ae1a9bd4-f16d-4934-a67c-ec9ad4d3bd3e": {
      fuse: "Vloerdoos vergaderlokaal 1",
      usageCategories: ["Office equipment", "Computers", "Other sockets"]
    },
    "6c4da608-8e49-4917-90db-ff92a889b364": {
      fuse: "Vloerdoos bureau 1",
      usageCategories: ["Office equipment", "Other sockets", "Computers"]
    },
    "44494f41-f865-4cad-9032-e968148b5865": {
      fuse: "Vloerdoos bureau 1",
      usageCategories: ["Computers", "Other sockets", "Office equipment"]
    },
    "f390d66f-4901-4dce-bf24-51d862f0feea": {
      fuse: "Vloerdoos bureau 1",
      usageCategories: ["Computers", "Other sockets", "Office equipment"]
    },
    "80b0f3d9-8dac-4253-93cf-a06e4f75b5b7": {
      fuse: "Vloerdoos bureau 2",
      usageCategories: ["Computers", "Office equipment", "Other sockets"]
    },
    "8a472d54-865c-4dcd-8e96-7170ebb86d41": {
      fuse: "Vloerdoos bureau 2",
      usageCategories: ["Computers", "Office equipment", "Other sockets"]
    },
    "07a6cd16-a225-49b1-b064-b340930c9ea4": {
      fuse: "Vloerdoos bureau 2",
      usageCategories: ["Office equipment", "Computers", "Other sockets"]
    },
    "16075fc4-ff32-4075-999b-2bb39dd0da71": {
      fuse: "Vloerdoos bureau 2",
      usageCategories: ["Computers", "Office equipment", "Other sockets"]
    },
    "4cd4ac9e-06d9-4c9c-9e6d-fb7e7b958b7d": {
      fuse: "SC inkomzone, vergaderlokaal 1 & 2, directielokaal, velux achter",
      usageCategories: ["Other sockets", "Office equipment", "Computers", "Sun blinds"]
    },
    "758b6544-5cd6-4dda-97f3-a8aaadbb770a": {
      fuse: "SC bureau 1, licht serverlokaal, licht & SC berging & bureau's boven",
      usageCategories: ["Computers", "Other sockets", "Lighting", "Office equipment"]
    },
    "b6500101-ef5b-42f0-a332-2a61d25231cb": {
      fuse: "Licht centraal LED-strip",
      usageCategories: ["Lighting"]
    },
  },


  // ===========================================================================================================
  // New & improved queries ====================================================================================
  // ===========================================================================================================

  ALL_SENSORS_W_WH_QUERY: {
    index: "*",
    body: {
      "aggs": {
        "allSensorsMinWh": {
          "sum_bucket": {
            "buckets_path": "sensorBuckets>minWh"
          }
        },
        "allSensorsMaxWh": {
          "sum_bucket": {
            "buckets_path": "sensorBuckets>maxWh"
          }
        },
        "sensorBuckets": {
          "terms": {
            "field": "sensor_id",
            "order": {
              "_key": "desc"
            },
            "size": 100
          },
          "aggs": {
            "avgWatts": {
              "avg": {
                "field": "w_a"
              }
            },
            "minWh": {
              "min": {
                "field": "total_active_energy"
              }
            },
            "maxWh": {
              "max": {
                "field": "total_active_energy"
              }
            },
            "fuse": {
              "terms": {
                "field": "fuse_description"
              }
            }
          }
        }
      },
      "size": 0,
      "stored_fields": [
        "*"
      ],
      "script_fields": {},
      "docvalue_fields": [{
        "field": "@timestamp",
        "format": "date_time"
      }],
      "_source": {
        "excludes": []
      },
      "query": {
        "bool": {
          "must": [],
          "filter": [{
              "match_all": {}
            },
            {
              "range": {
                "@timestamp": {
                  "format": "strict_date_hour_minute",
                  "gte": "2020-03-09T00:00",
                  "lte": "2020-03-09T23:59"
                }
              }
            }
          ],
          "should": [],
          "must_not": []
        }
      }
    }
  },








  // ===========================================================================================================
  // Old & sad queries =========================================================================================
  // ===========================================================================================================

  TOTAL_WH_QUERY: {
    index: "*",
    body: {
      "aggs": {
        "minsum": {
          "sum_bucket": {
            "buckets_path": "sensor-bucket>min"
          }
        },
        "maxsum": {
          "sum_bucket": {
            "buckets_path": "sensor-bucket>max"
          }
        },
        "sensor-bucket": {
          "terms": {
            "field": "sensorId",
            "order": {
              "_key": "desc"
            },
            "size": 100
          },
          "aggs": {
            "avg": {
              "avg": {
                "field": "WHrDelRec"
              }
            },
            "min": {
              "min": {
                "field": "WHrDelRec"
              }
            },
            "max": {
              "max": {
                "field": "WHrDelRec"
              }
            }
          }
        }
      },
      "size": 0,
      "_source": {
        "excludes": []
      },
      "stored_fields": [
        "*"
      ],
      "script_fields": {},
      "docvalue_fields": [{
        "field": "@timestamp",
        "format": "date_time"
      }],
      "query": {
        "bool": {
          "must": [],
          "filter": [{
              "match_all": {}
            },
            {
              "range": {
                "@timestamp": {
                  "format": "strict_date_hour_minute",
                  "gte": "2020-02-19T00:00",
                  "lte": "2020-02-19T20:59"
                }
              }
            }
          ],
          "should": [],
          "must_not": []
        }
      }
    }
  },

  TOTAL_FUSE_WH_QUERY: {
    index: "*",
    body: {
      "aggs": {
        "minsum": {
          "sum_bucket": {
            "buckets_path": "sensor-bucket>min"
          }
        },
        "maxsum": {
          "sum_bucket": {
            "buckets_path": "sensor-bucket>max"
          }
        },
        "sensor-bucket": {
          "terms": {
            "field": "fuseDescription",
            "order": {
              "_key": "desc"
            },
            "size": 100
          },
          "aggs": {
            "avg": {
              "avg": {
                "field": "WHrDelRec"
              }
            },
            "min": {
              "min": {
                "field": "WHrDelRec"
              }
            },
            "max": {
              "max": {
                "field": "WHrDelRec"
              }
            }
          }
        }
      },
      "size": 0,
      "_source": {
        "excludes": []
      },
      "stored_fields": [
        "*"
      ],
      "script_fields": {},
      "docvalue_fields": [{
        "field": "@timestamp",
        "format": "date_time"
      }],
      "query": {
        "bool": {
          "must": [],
          "filter": [{
              "match_all": {}
            },
            {
              "range": {
                "@timestamp": {
                  "format": "strict_date_hour_minute",
                  "gte": "2020-02-19T00:00",
                  "lte": "2020-02-19T20:59"
                }
              }
            }
          ],
          "should": [],
          "must_not": []
        }
      }
    }
  },

  MAX_WH_FOR_FUSE_QUERY: {
    index: "*",
    body: {
      "aggs": {
        "maxFuseWh": {
          "max": {
            "field": "WHrDelRec"
          }
        }
      },
      "size": 0,
      "stored_fields": [
        "*"
      ],
      "script_fields": {},
      "docvalue_fields": [{
        "field": "@timestamp",
        "format": "date_time"
      }],
      "_source": {
        "excludes": []
      },
      "query": {
        "bool": {
          "must": [],
          "filter": [{
              "match_phrase": {
                "fuseDescription": "Vloerdoos bureau 1"
              }
            },
            {
              "range": {
                "@timestamp": {
                  "gte": "2020-02-27T13:23:16.322Z",
                  "lte": "2020-02-27T13:38:16.322Z",
                  "format": "strict_date_optional_time"
                }
              }
            }
          ],
          "should": [],
          "must_not": []
        }
      }
    }
  },


  // By trial & error: appropriate fixed_interval seems to be:
  //   for interval [timefrom, timeto]
  //      let diff_in_secs = timeto - timefrom
  //      return 2*(diff_in_secs / 1000)
  MAX_WH_DISTRIBUTION_PER_FUSE_QUERY: {
    index: "*",
    body: {
      "aggs": {
        "results": {
          "date_histogram": {
            "field": "@timestamp",
            "fixed_interval": "10m",
            "time_zone": "Europe/Brussels"
          },
          "aggs": {
            "myMaxWhSum": {
              "sum_bucket": {
                "buckets_path": "myBucket>myMaxWh"
              }
            },
            "myAvgSum": {
              "sum_bucket": {
                "buckets_path": "myBucket>myAvgWatts"
              }
            },
            "myBucket": {
              "significant_terms": {
                "field": "fuseDescription",
                "size": 20
              },
              "aggs": {
                "myMaxWh": {
                  "max": {
                    "field": "WHrDelRec"
                  }
                },
                "myAvgWatts": {
                  "avg": {
                    "field": "W1"
                  }
                }
              }
            }
          }
        }
      },
      "size": 0,
      "stored_fields": [
        "*"
      ],
      "script_fields": {},
      "docvalue_fields": [{
        "field": "@timestamp",
        "format": "date_time"
      }],
      "_source": {
        "excludes": []
      },
      "query": {
        "bool": {
          "must": [],
          "filter": [{
            "range": {
              "@timestamp": {
                "gte": "2020-03-06T00:00:00.000Z",
                "lte": "2020-03-06T23:59:59.999Z",
                "format": "strict_date_optional_time"
              }
            }
          }],
          "should": [],
          "must_not": []
        }
      }
    }
  }









}
